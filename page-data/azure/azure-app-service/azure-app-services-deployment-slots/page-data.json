{
    "componentChunkName": "component---node-modules-gatsby-theme-kb-src-templates-topic-js",
    "path": "/azure/azure-app-service/azure-app-services-deployment-slots",
    "result": {"data":{"file":{"childMdx":{"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"tags\": \"azure, cloud, azure-certifications/az204, azure-app-service, deployment-slots\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"Azure App Services Deployment Slots\"), mdx(\"p\", null, \"When you deploy your web app, you can use a separate deployment slot instead of the default production slot when running in the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Standard, Premium, or Isolated App Service Plan tier\"), \".\"), mdx(\"p\", null, \"Deployment slots are live apps \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"with their own host names\"), \".\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"App content and configuration elements can be swapped\"), \" between two deployment slots, including the production slot.\"), mdx(\"p\", null, \"Deploying an app to a slot first and swapping it into production ensures that all slot instances are \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"warmed up before being swapped into production\"), \". This eliminates downtime when you deploy your app. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"The traffic redirection is seamless\"), \", and no requests are dropped because of swap operations. You can automate this entire workflow by configuring auto-swap when pre-swap validation isn't needed.\"), mdx(\"p\", null, \"Each App Service plan tier supports a different number of deployment slots (Standard: 5 slots. Premium and Isolated: 20 slots). There's no extra charge for using deployment slots.\"), mdx(\"h2\", null, \"Steps performed before swapping instances\"), mdx(\"p\", null, \"Swapping between the source slot (e.g., staging) and the target slot (e.g., production) happens in steps:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Apply the same configurations\"), \" existing on the target slot: slot-specific settings, connection strings, continuous deployment settings and App Service authentication settings are copied from the target slot to the source slot, forcing a restart.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Wait for validation\"), \": if the slot is configured to show a preview, the system waits for the validation of the slot before proceeding.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Wait for every instance in the source slot to complete its restart\"), \": if any instance fails to restart, then the system reverts all the changes and stops the swapping;\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Initialize local cache\"), \": to wake up the local cache, call the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/\"), \" endpoint of each instance on the source slot. This causes the restart of the instances;\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"If auto-swap is enabled with custom warm-up, \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"initialize each instance in the source slot by calling the \", mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"/\"), \" endpoint\"), \". If an instance returns \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"any\"), \" HTTP response, it's considered to be warmed up.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"When all the source slots are warmed up, \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"switch the routing rules for the two slots\"), \". Now, the source slot becomes the new target slot, and vice versa.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Apply steps 1-5 to warm up the \\\"new\\\" source slot in case another swap is required.\")), mdx(\"h2\", null, \"Slot configurations\"), mdx(\"p\", null, \"When you clone configuration from another deployment slot, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"the cloned configuration is editable\"), \".\"), mdx(\"p\", null, \"Some configuration elements follow the content across a swap (\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"not slot specific\"), \"):\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Publishing endpoints\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Custom domain names\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Non-public certificates and TLS/SSL settings\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Scale settings\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"WebJobs schedulers\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"IP restrictions\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Always On\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Diagnostic log settings\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Cross-origin resource sharing (CORS)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Virtual network integration\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Managed identities\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Settings that end with the suffix \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"_EXTENSION_VERSION\"))), mdx(\"p\", null, \"Other configuration elements stay in the same slot after a swap (\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"slot specific\"), \"):\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"App settings (can be configured to stick to a slot)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Connection strings (can be configured to stick to a slot)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Handler mappings\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Public certificates\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"WebJobs content\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Hybrid connections (planned to be unswapped)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Azure Content Delivery Network (planned to be unswapped)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Service endpoints (planned to be unswapped)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Path mappings\")), mdx(\"p\", null, \"You can make one setting stick to a specific slot by editing the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Deployment slot setting\"), \" page.\"), mdx(\"p\", null, \"You can make all settings (except for the ones related to Managed Identity) swappable by setting the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"WEBSITE_OVERRIDE_PRESERVE_DEFAULT_STICKY_SLOT_SETTINGS\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"0\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"false\"), \". Every setting then becomes swappable.\"), mdx(\"h2\", null, \"How to swap Deployment slots\"), mdx(\"h3\", null, \"Manual swap\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Under the Deployment slots page, select Swap.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Choose the source and the target slot.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Verify the changes by looking at the Target Changes tab.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Click Swap\")), mdx(\"h3\", null, \"Swap with preview\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Select the Source and Target slot.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Select \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Perform swap with preview\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Click Start Swap. This will allow you to see a preview of the slot, available at \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"https://<app_name>-<source-slot-name>.azurewebsites.net\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Select \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Complete Swap\"), \" or \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Cancel Swap\"), \".\")), mdx(\"h3\", null, \"Auto swap\"), mdx(\"p\", null, \"Integrated with Azure DevOps Services pipelines.\"), mdx(\"p\", null, \"Auto swap is \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"not supported on Linux and Web App for Containers\"), \".\"), mdx(\"h3\", null, \"Custom warm-up\"), mdx(\"p\", null, \"Some applications require you to hit specific pages to complete the warm-up.\"), mdx(\"p\", null, \"To specify which pages to call, you must edit the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"applicationInitialization\"), \" node in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"web.config\"), \" file.\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"xml\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-xml\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-xml\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"system.webServer\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"applicationInitialization\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"add\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"initializationPage\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-value\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation attr-equals\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\"), \"/\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"hostName\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-value\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation attr-equals\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\"), \"[app hostname]\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"/>\")), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"add\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"initializationPage\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-value\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation attr-equals\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\"), \"/Home/About\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"hostName\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-value\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation attr-equals\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\"), \"[app hostname]\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"/>\")), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"applicationInitialization\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"system.webServer\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\"))))), mdx(\"p\", null, \"You can also customize the warm-up behaviour with one or more of the following \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"app settings\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"WEBSITE_SWAP_WARMUP_PING_PATH\"), \": The path to ping to warm up your site. Add this app setting by specifying a custom path that begins with a slash as the value. An example is \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/statuscheck\"), \". The default value is \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"WEBSITE_SWAP_WARMUP_PING_STATUSES\"), \": Valid HTTP response codes for the warm-up operation. Add this app setting with a comma-separated list of HTTP codes. An example is 200,202 . If the returned status code isn't in the list, the warm-up and swap operations are stopped. \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"By default, all response codes are valid.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"WEBSITE_WARMUP_PATH\"), \": A relative path on the site that should be pinged whenever the site restarts (not only during slot swaps). Example values include \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/statuscheck\"), \" or the root path, \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/\"), \".\")), mdx(\"h2\", null, \"Route traffic in App Service\"), mdx(\"p\", null, \"By default, all client requests to the app's production URL (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://<app_name>.azurewebsites.net\"), \") are routed to the production slot.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"You can route a portion of the traffic to another slot\"), \". This feature is useful if you need user feedback for a new update but you're not ready to release it to production.\"), mdx(\"p\", null, \"You can define the percentage of clients to use the new slot by navigating under the Deployment Stots settings: you can go to the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Traffic %\"), \" column and specify the percentage of traffic you want to route.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Random\"), \" users are routed. Still, when a client is routed to a specific slot, it's pinned to that slot for the rest of the client session, thanks to the usage of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x-ms-routing-name\"), \" cookie.\"), mdx(\"p\", null, \"If the client is pointing to the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"staging\"), \" slot, the cookie will be \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x-ms-routing-name=staging\"), \".\"), mdx(\"p\", null, \"If the client is pointing to the production slot, the cookie name will be \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x-ms-routing-name=self\"), \".\"), mdx(\"p\", null, \"If you want users to move from one app slot to another, you can append in the query string the value of the cookie: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<webappname>.azurewebsites.net/?x-ms-routing-name=staging\"), \".\"), mdx(\"p\", null, \"By default, new slots are given a routing rule of 0%.\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"","private":false},"tableOfContents":{"items":[{"url":"#azure-app-services-deployment-slots","title":"Azure App Services Deployment Slots","items":[{"url":"#steps-performed-before-swapping-instances","title":"Steps performed before swapping instances"},{"url":"#slot-configurations","title":"Slot configurations"},{"url":"#how-to-swap-deployment-slots","title":"How to swap Deployment slots","items":[{"url":"#manual-swap","title":"Manual swap"},{"url":"#swap-with-preview","title":"Swap with preview"},{"url":"#auto-swap","title":"Auto swap"},{"url":"#custom-warm-up","title":"Custom warm-up"}]},{"url":"#route-traffic-in-app-service","title":"Route traffic in App Service"}]}]},"outboundReferences":[],"inboundReferences":[{"contextLine":"If you are using [[azure-app-services-deployment-slots]], you can mark a setting as _swappable_.","referrer":{"parent":{"id":"deb4e0d7-ee35-5448-920e-7a8b2d1acdab","fields":{"slug":"/azure/azure-app-service/configuring-azure-app-services","title":"Configuring Azure App Services"}}}},{"contextLine":"  - [[azure-app-services-deployment-slots]]","referrer":{"parent":{"id":"054932f3-ea86-5292-9b43-2c04a7a196ec","fields":{"slug":"/azure-certifications/az-204","title":"AZ-204 - Developing Solutions for Microsoft Azure"}}}},{"contextLine":"  - [[azure-app-services-deployment-slots]]","referrer":{"parent":{"id":"054932f3-ea86-5292-9b43-2c04a7a196ec","fields":{"slug":"/azure-certifications/az-204","title":"AZ-204 - Developing Solutions for Microsoft Azure"}}}},{"contextLine":"You can use CI/CD and [[azure-app-services-deployment-slots]].","referrer":{"parent":{"id":"3aff0a6d-1e80-568e-8a4b-2952def2f7b1","fields":{"slug":"/azure/azure-app-service/azure-app-service","title":"Azure App Service"}}}}]},"fields":{"slug":"/azure/azure-app-service/azure-app-services-deployment-slots","title":"Azure App Services Deployment Slots"}}},"pageContext":{"id":"732bf670-8b19-5cf9-a087-c84af99caf9a","refWordMdxSlugDict":{},"tocTypes":["sidebar"]}},
    "staticQueryHashes": ["2221750479","2380733210","2768355698","63159454","847517413"]}